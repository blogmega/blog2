<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TVServe Content</title>
</head>
<body>
    <div id="content">Loading...</div>

    <script>
    async function loadContent() {
        const path = window.location.pathname;
        const contentDiv = document.getElementById('content');

        try {
            const response = await fetch('/product.json');
            const products = await response.json();

            if (path === '/content' || path === '/content/') {
                // List all products
                let html = '<h1>Product List</h1><ul>';
                products.forEach(product => {
                    html += `<li><a href="/content/${product.id}">${product.name}</a></li>`;
                });
                html += '</ul>';
                contentDiv.innerHTML = html;
            } else if (path.startsWith('/content/')) {
                // Show product detail
                const productId = path.split('/content/')[1];
                const product = products.find(p => p.id === productId);

                if (product) {
                    contentDiv.innerHTML = `
                        <h1>${product.name}</h1>
                        <img src="${product.preview}" alt="${product.name}" style="max-width:300px;">
                        <p><strong>Brand:</strong> ${product.brand}</p>
                        <p><strong>Price:</strong> ₹${product.price}</p>
                        <p>${product.description}</p>
                        <h3>Photos:</h3>
                        ${product.photos.map(photo => `<img src="${photo}" style="width:100px; margin:5px;">`).join('')}
                        <br><br>
                        <a href="/content">← Back to Products</a>
                    `;
                } else {
                    contentDiv.innerHTML = '<h2>Product not found</h2><a href="/content">← Back to Products</a>';
                }
            } else {
                contentDiv.innerHTML = '<h2>Page not found</h2>';
            }
        } catch (err) {
            contentDiv.innerHTML = '<h2>Error loading products</h2>';
            console.error(err);
        }
    }

    window.onload = loadContent;
    </script>
</body>
</html>
